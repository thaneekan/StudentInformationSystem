{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thane\\\\Desktop\\\\WINTER 2025\\\\SOEN 487\\\\Assignments\\\\A1.2\\\\frontend-react\\\\src\\\\components\\\\AddStudentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useMutation, useQuery, gql } from \"@apollo/client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GET_DEPARTMENTS = gql`\n  query {\n    departments {\n      id\n      name\n    }\n  }\n`;\nconst ADD_STUDENT = gql`\n  mutation AddStudent(\n    $firstName: String!,\n    $lastName: String!,\n    $studentId: ID!,\n    $address: String!,\n    $departmentId: ID!\n  ) {\n    addStudent(\n      firstName: $firstName,\n      lastName: $lastName,\n      studentId: $studentId,\n      address: $address,\n      departmentId: $departmentId\n    ) {\n      id\n      first_name\n      last_name\n      student_id\n    }\n  }\n`;\nconst AddStudentForm = () => {\n  _s();\n  var _data$departments;\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_DEPARTMENTS);\n  const [form, setForm] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    address: \"\",\n    studentId: \"\",\n    departmentId: \"\"\n  });\n  const [message, setMessage] = useState(null); // ✅ Message for success or failure\n  const [addStudent, {\n    error: mutationError\n  }] = useMutation(ADD_STUDENT);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(\"Submitting:\", form);\n    try {\n      const {\n        data\n      } = await addStudent({\n        variables: {\n          ...form,\n          studentId: String(form.studentId),\n          // Ensure studentId is a string\n          departmentId: String(form.departmentId) // Ensure departmentId is a string\n        }\n      });\n      console.log(\"Student added successfully!\", data);\n      setMessage({\n        type: \"success\",\n        text: \"✅ Student added successfully!\"\n      });\n\n      // ✅ Reset form fields after successful submission\n      setForm({\n        firstName: \"\",\n        lastName: \"\",\n        address: \"\",\n        studentId: \"\",\n        departmentId: \"\"\n      });\n    } catch (err) {\n      console.error(\"Failed to add student:\", err);\n      setMessage({\n        type: \"error\",\n        text: \"❌ Failed to add student. Please try again.\"\n      });\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading departments...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Error loading departments\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"First name\",\n      value: form.firstName,\n      onChange: e => setForm({\n        ...form,\n        firstName: e.target.value\n      }),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Last name\",\n      value: form.lastName,\n      onChange: e => setForm({\n        ...form,\n        lastName: e.target.value\n      }),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Address\",\n      value: form.address,\n      onChange: e => setForm({\n        ...form,\n        address: e.target.value\n      }),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Student ID\",\n      value: form.studentId,\n      onChange: e => setForm({\n        ...form,\n        studentId: e.target.value\n      }),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: form.departmentId,\n      onChange: e => setForm({\n        ...form,\n        departmentId: e.target.value\n      }),\n      required: true,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Select Department\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), data === null || data === void 0 ? void 0 : (_data$departments = data.departments) === null || _data$departments === void 0 ? void 0 : _data$departments.map(dept => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: dept.id,\n        children: dept.name\n      }, dept.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Add student\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: message.type === \"success\" ? \"green\" : \"red\"\n      },\n      children: message.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }, this), mutationError && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: \"\\u274C Error adding student.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(AddStudentForm, \"/3dvpoAOnHSwebMBUJZR2PvTL7s=\", false, function () {\n  return [useQuery, useMutation];\n});\n_c = AddStudentForm;\nexport default AddStudentForm;\nvar _c;\n$RefreshReg$(_c, \"AddStudentForm\");","map":{"version":3,"names":["React","useState","useMutation","useQuery","gql","jsxDEV","_jsxDEV","GET_DEPARTMENTS","ADD_STUDENT","AddStudentForm","_s","_data$departments","loading","error","data","form","setForm","firstName","lastName","address","studentId","departmentId","message","setMessage","addStudent","mutationError","handleSubmit","e","preventDefault","console","log","variables","String","type","text","err","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","value","onChange","target","required","departments","map","dept","id","name","style","color","_c","$RefreshReg$"],"sources":["C:/Users/thane/Desktop/WINTER 2025/SOEN 487/Assignments/A1.2/frontend-react/src/components/AddStudentForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useMutation, useQuery, gql } from \"@apollo/client\";\r\n\r\nconst GET_DEPARTMENTS = gql`\r\n  query {\r\n    departments {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst ADD_STUDENT = gql`\r\n  mutation AddStudent(\r\n    $firstName: String!,\r\n    $lastName: String!,\r\n    $studentId: ID!,\r\n    $address: String!,\r\n    $departmentId: ID!\r\n  ) {\r\n    addStudent(\r\n      firstName: $firstName,\r\n      lastName: $lastName,\r\n      studentId: $studentId,\r\n      address: $address,\r\n      departmentId: $departmentId\r\n    ) {\r\n      id\r\n      first_name\r\n      last_name\r\n      student_id\r\n    }\r\n  }\r\n`;\r\n\r\nconst AddStudentForm = () => {\r\n  const { loading, error, data } = useQuery(GET_DEPARTMENTS);\r\n  const [form, setForm] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    address: \"\",\r\n    studentId: \"\",\r\n    departmentId: \"\",\r\n  });\r\n  const [message, setMessage] = useState(null); // ✅ Message for success or failure\r\n  const [addStudent, { error: mutationError }] = useMutation(ADD_STUDENT);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    console.log(\"Submitting:\", form);\r\n\r\n    try {\r\n      const { data } = await addStudent({\r\n        variables: {\r\n          ...form,\r\n          studentId: String(form.studentId), // Ensure studentId is a string\r\n          departmentId: String(form.departmentId), // Ensure departmentId is a string\r\n        },\r\n      });\r\n\r\n      console.log(\"Student added successfully!\", data);\r\n      setMessage({ type: \"success\", text: \"✅ Student added successfully!\" });\r\n\r\n      // ✅ Reset form fields after successful submission\r\n      setForm({\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        address: \"\",\r\n        studentId: \"\",\r\n        departmentId: \"\",\r\n      });\r\n\r\n    } catch (err) {\r\n      console.error(\"Failed to add student:\", err);\r\n      setMessage({ type: \"error\", text: \"❌ Failed to add student. Please try again.\" });\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading departments...</p>;\r\n  if (error) return <p>Error loading departments</p>;\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"First name\"\r\n        value={form.firstName}\r\n        onChange={(e) => setForm({ ...form, firstName: e.target.value })}\r\n        required\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Last name\"\r\n        value={form.lastName}\r\n        onChange={(e) => setForm({ ...form, lastName: e.target.value })}\r\n        required\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Address\"\r\n        value={form.address}\r\n        onChange={(e) => setForm({ ...form, address: e.target.value })}\r\n        required\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Student ID\"\r\n        value={form.studentId}\r\n        onChange={(e) => setForm({ ...form, studentId: e.target.value })}\r\n        required\r\n      />\r\n\r\n      {/* Independent Department Selection */}\r\n      <select\r\n        value={form.departmentId}\r\n        onChange={(e) => setForm({ ...form, departmentId: e.target.value })}\r\n        required\r\n      >\r\n        <option value=\"\">Select Department</option>\r\n        {data?.departments?.map((dept) => (\r\n          <option key={dept.id} value={dept.id}>\r\n            {dept.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <button type=\"submit\">Add student</button>\r\n\r\n      {/* ✅ Display Success or Error Message */}\r\n      {message && <p style={{ color: message.type === \"success\" ? \"green\" : \"red\" }}>{message.text}</p>}\r\n      \r\n      {mutationError && <p style={{ color: \"red\" }}>❌ Error adding student.</p>}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AddStudentForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}