{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thane\\\\Desktop\\\\WINTER 2025\\\\SOEN 487\\\\Assignments\\\\A1.2\\\\frontend-react\\\\src\\\\components\\\\AddStudentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useMutation, useQuery, gql } from \"@apollo/client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GET_DEPARTMENTS = gql`\n  query {\n    departments {\n      id\n      name\n    }\n  }\n`;\nconst ADD_STUDENT = gql`\n  mutation AddStudent(\n    $firstName: String!,\n    $lastName: String!,\n    $studentId: ID!,\n    $address: String!,\n    $departmentId: ID!\n  ) {\n    addStudent(\n      firstName: $firstName,\n      lastName: $lastName,\n      studentId: $studentId,\n      address: $address,\n      departmentId: $departmentId\n    ) {\n      id\n      first_name\n      last_name\n      student_id\n    }\n  }\n`;\nconst AddStudentForm = () => {\n  _s();\n  var _data$departments;\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_DEPARTMENTS);\n  const [form, setForm] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    address: \"\",\n    studentId: \"\",\n    departmentId: \"\"\n  });\n  const [addStudent, {\n    error: mutationError\n  }] = useMutation(ADD_STUDENT);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(\"Submitting:\", form);\n    try {\n      await addStudent({\n        variables: {\n          ...form,\n          studentId: String(form.studentId) // Ensure studentId is a string\n        }\n      });\n      console.log(\"Student added successfully!\");\n    } catch (err) {\n      console.error(\"Failed to add student:\", err);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading departments...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Error loading departments\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"First name\",\n      value: form.firstName,\n      onChange: e => setForm({\n        ...form,\n        firstName: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Last name\",\n      value: form.lastName,\n      onChange: e => setForm({\n        ...form,\n        lastName: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Address\",\n      value: form.address,\n      onChange: e => setForm({\n        ...form,\n        address: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Student ID\",\n      value: form.studentId,\n      onChange: e => setForm({\n        ...form,\n        studentId: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: form.departmentId,\n      onChange: e => setForm({\n        ...form,\n        departmentId: e.target.value\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Select Department\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), data === null || data === void 0 ? void 0 : (_data$departments = data.departments) === null || _data$departments === void 0 ? void 0 : _data$departments.map(dept => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: dept.id,\n        children: dept.name\n      }, dept.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Add student\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), mutationError && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: \"Error adding student.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(AddStudentForm, \"b9zK0u91pgmQT68fEItx8naooGQ=\", false, function () {\n  return [useQuery, useMutation];\n});\n_c = AddStudentForm;\nexport default AddStudentForm;\nvar _c;\n$RefreshReg$(_c, \"AddStudentForm\");","map":{"version":3,"names":["React","useState","useMutation","useQuery","gql","jsxDEV","_jsxDEV","GET_DEPARTMENTS","ADD_STUDENT","AddStudentForm","_s","_data$departments","loading","error","data","form","setForm","firstName","lastName","address","studentId","departmentId","addStudent","mutationError","handleSubmit","e","preventDefault","console","log","variables","String","err","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","departments","map","dept","id","name","style","color","_c","$RefreshReg$"],"sources":["C:/Users/thane/Desktop/WINTER 2025/SOEN 487/Assignments/A1.2/frontend-react/src/components/AddStudentForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useMutation, useQuery, gql } from \"@apollo/client\";\r\n\r\nconst GET_DEPARTMENTS = gql`\r\n  query {\r\n    departments {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst ADD_STUDENT = gql`\r\n  mutation AddStudent(\r\n    $firstName: String!,\r\n    $lastName: String!,\r\n    $studentId: ID!,\r\n    $address: String!,\r\n    $departmentId: ID!\r\n  ) {\r\n    addStudent(\r\n      firstName: $firstName,\r\n      lastName: $lastName,\r\n      studentId: $studentId,\r\n      address: $address,\r\n      departmentId: $departmentId\r\n    ) {\r\n      id\r\n      first_name\r\n      last_name\r\n      student_id\r\n    }\r\n  }\r\n`;\r\n\r\nconst AddStudentForm = () => {\r\n  const { loading, error, data } = useQuery(GET_DEPARTMENTS);\r\n  const [form, setForm] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    address: \"\",\r\n    studentId: \"\",\r\n    departmentId: \"\",\r\n  });\r\n\r\n  const [addStudent, { error: mutationError }] = useMutation(ADD_STUDENT);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    console.log(\"Submitting:\", form);\r\n\r\n    try {\r\n      await addStudent({\r\n        variables: {\r\n          ...form,\r\n          studentId: String(form.studentId), // Ensure studentId is a string\r\n        },\r\n      });\r\n      console.log(\"Student added successfully!\");\r\n    } catch (err) {\r\n      console.error(\"Failed to add student:\", err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading departments...</p>;\r\n  if (error) return <p>Error loading departments</p>;\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"First name\"\r\n        value={form.firstName}\r\n        onChange={(e) => setForm({ ...form, firstName: e.target.value })}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Last name\"\r\n        value={form.lastName}\r\n        onChange={(e) => setForm({ ...form, lastName: e.target.value })}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Address\"\r\n        value={form.address}\r\n        onChange={(e) => setForm({ ...form, address: e.target.value })}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Student ID\"\r\n        value={form.studentId}\r\n        onChange={(e) => setForm({ ...form, studentId: e.target.value })}\r\n      />\r\n\r\n      {/* Independent Department Selection */}\r\n      <select\r\n        value={form.departmentId}\r\n        onChange={(e) => setForm({ ...form, departmentId: e.target.value })}\r\n      >\r\n        <option value=\"\">Select Department</option>\r\n        {data?.departments?.map((dept) => (\r\n          <option key={dept.id} value={dept.id}>\r\n            {dept.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <button type=\"submit\">Add student</button>\r\n\r\n      {mutationError && <p style={{ color: \"red\" }}>Error adding student.</p>}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AddStudentForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}